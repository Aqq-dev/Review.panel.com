<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ¬ãƒ“ãƒ¥ãƒ¼é€ä¿¡ãƒ•ã‚©ãƒ¼ãƒ </title>
  <style>
    /* åŸºæœ¬ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    .rating {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    .rating label {
      cursor: pointer;
    }
    .textarea {
      width: 100%;
      height: 100px;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ã‚ãªãŸã¯ã©ã®ã‚µã‚¤ãƒˆã§å–å¼•ã‚’è¡Œã„ã¾ã—ãŸã‹ï¼Ÿ</h1>
  <form id="reviewForm">
    <label>
      <input type="radio" name="site" value="gameClub"> ã‚²ãƒ¼ãƒ ã‚¯ãƒ©ãƒ–
    </label>
    <label>
      <input type="radio" name="site" value="gameTrade"> ã‚²ãƒ¼ãƒ ãƒˆãƒ¬ãƒ¼ãƒ‰
    </label>

    <h2>è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„:</h2>
    <div class="rating">
      <label><input type="radio" name="rating" value="1"> â˜…â˜†â˜†â˜†â˜†</label>
      <label><input type="radio" name="rating" value="2"> â˜…â˜…â˜†â˜†â˜†</label>
      <label><input type="radio" name="rating" value="3"> â˜…â˜…â˜…â˜†â˜†</label>
      <label><input type="radio" name="rating" value="4"> â˜…â˜…â˜…â˜…â˜†</label>
      <label><input type="radio" name="rating" value="5"> â˜…â˜…â˜…â˜…â˜…</label>
    </div>

    <h2>è²·ã£ãŸã‚‚ã®:</h2>
    <textarea name="item" class="textarea" placeholder="è²·ã£ãŸã‚¢ã‚¤ãƒ†ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>

    <h2>å€‹æ•°:</h2>
    <input type="text" name="quantity" class="textarea" placeholder="å€‹æ•°ã‚’æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„" id="quantityInput">

    <h2>æ„Ÿæƒ³:</h2>
    <textarea name="feedback" class="textarea" placeholder="æ„Ÿæƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>

    <button type="submit">é€ä¿¡</button>
  </form>

  <div id="confirmation" style="display: none;">
    <h2>ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹:</h2>
    <p>ğŸ’ã€è²·ã£ãŸã‚‚ã®ã€‘<span id="reviewItem"></span></p>
    <p>ğŸ›ï¸ã€å€‹æ•°ã€‘<span id="reviewQuantity"></span></p>
    <p>ğŸ’¬ã€æ„Ÿæƒ³ã€‘<span id="reviewFeedback"></span></p>
    <p>â­ã€è©•ä¾¡ã€‘<span id="reviewRating"></span></p>
  </div>
</div>

<script>
  const form = document.getElementById('reviewForm');
  const quantityInput = document.getElementById('quantityInput');
  
  form.addEventListener('submit', function(event) {
    event.preventDefault();

    const site = form.querySelector('input[name="site"]:checked').value;
    const rating = form.querySelector('input[name="rating"]:checked').value;
    const item = form.querySelector('textarea[name="item"]').value;
    const quantity = quantityInput.value;
    const feedback = form.querySelector('textarea[name="feedback"]').value;

    // å€‹æ•°ãŒæ•°å­—ã§ãªã„å ´åˆã¯è­¦å‘Š
    if (isNaN(quantity) || quantity.trim() === "") {
      alert('å€‹æ•°ã¯æ•°å­—ã®ã¿å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
      return;
    }

    // ç¢ºèªã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ã‚’è¡¨ç¤º
    document.getElementById('reviewItem').textContent = item;
    document.getElementById('reviewQuantity').textContent = quantity;
    document.getElementById('reviewFeedback').textContent = feedback;
    document.getElementById('reviewRating').textContent = `â˜…`.repeat(rating) + `â˜†`.repeat(5 - rating);
    
    document.getElementById('confirmation').style.display = 'block';

    // é€ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
    const reviewData = {
      site: site,
      rating: rating,
      item: item,
      quantity: quantity,
      feedback: feedback
    };

    // ã‚µã‚¤ãƒˆã«å¿œã˜ãŸWebhook URLã«é€ä¿¡
    const webhookURL = site === 'gameClub' ? 'https://discord.com/api/webhooks/1328655432398667797/qPsVa5vcH-SL9exThNJaKyrZ560KaNWASc0UHHa8PIVZr4lNtew_6vcSJz5MjXU99MZv' : 'https://discord.com/api/webhooks/1328655690331328533/-bFeyYKjc62YL97n2LSERe6nPElK-hptdDNzGykMS1PXUYTuAr3NF8gWJkdFY6Mj7EXk';
    
    // Webhookã«é€ã‚‹åŸ‹ã‚è¾¼ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä½œæˆ
    const embedMessage = {
      {
  "embeds": [{
    "title": "å®Ÿç¸¾è¨˜å…¥ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼",
    "color": 00ff00,  // ã“ã“ã§è‰²ã‚’æŒ‡å®š
    "fields": [
      {
        "name": "ğŸ’ã€è²·ã£ãŸã‚‚ã®ã€‘",
        "value": "item"
      },
      {
        "name": "ğŸ›ï¸ã€å€‹æ•°ã€‘",
        "value": "quantity"
      },
      {
        "name": "ğŸ’¬ã€æ„Ÿæƒ³ã€‘",
        "value": "feedback"
      },
      {
        "name": "â­ã€è©•ä¾¡ã€‘",
        "value": "â˜…".repeat(rating) + "â˜†".repeat(5 - rating)
      }
    ]
  }]
}


    // Webhookã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
    fetch(webhookURL, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(embedMessage),
    }).then(response => {
      if (response.ok) {
        alert('ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ!');
      } else {
        alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
      }
    });
  });
</script>

</body>
</html>
